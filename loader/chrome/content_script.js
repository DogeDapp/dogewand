!function(){"use strict";function e(e,t){return t||(t=document),t.querySelector(e)}function t(e,t){return t||(t=document),Array.prototype.slice.call(t.querySelectorAll(e))}function n(e,t){var n=document.createElement("div");n.innerHTML=e;var r=n.firstChild;return t.appendChild(r)}function r(){var e=riot.observable(this);e.version=function(){p.source.postMessage(JSON.stringify({method:"version",data:l}),d)},e.createTip=function(e){p.source.postMessage(JSON.stringify({method:"create_tip",data:{uniqid:e.uniqid,name:e.name,provider:f}}),d)}}function i(){var e=riot.observable(this);window.addEventListener("message",function(t){if(console.log("loader receives",t),t.origin===d){var n=JSON.parse(t.data);switch(n.method){case"hello":e.source=t.source,h.version(l);break;case"size":e.trigger("size",n.data);break;case"tipping":h.trigger("tipping",n.data);break;case"destroy":h.trigger("destroy")}}},!1)}function o(t){function n(){t.classList.add("dgw-wand"),o=u.link_finders[f](),o.forEach(function(e){e.classList.add("dgw-link"),e.addEventListener("click",r)}),t.addEventListener("click",i)}function r(e){e.preventDefault(),h.createTip(u.uniqid_finders[f](this))}function i(){t.classList.remove("dgw-wand"),t.removeEventListener("click",i),o.forEach(function(e){e.classList.remove("dgw-link"),e.removeEventListener("click",r)})}a(t);var o;h.on("tipping",function(e){e?n():i()}),h.on("destroy",function(){var t=e("#dgw-frame");t&&t.remove();var n=e("#dgw-styles");n&&n.remove()})}function a(e){var t=n('<iframe id="dgw-frame" width="100%"></iframe>',e);p.on("size",function(e){t.setAttribute("width",e.width),t.setAttribute("height",e.height)}),p.on("navigate",function(e){t.setAttribute("src",e)}),p.source=t.contentWindow}function s(e){var t=e.split("").reverse().join("").match(/^([^\.]*\.[^\.]*).*$/)[1].split("").reverse().join("");switch(t){case"facebook.com":return"Facebook";case"youtube.com":return"Youtube";default:return!1}}var c="iframe#dgw-frame{position:fixed;bottom:0;left:0;border:0;z-index:100000}.dgw-wand *{cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAgCAYAAAAIXrg4AAAEiElEQVRIDZ1WW0hjVxQdNTOdZLS1dbSxTT9MX9HpJLZgNaU0fhW/in4MxY9C/ZGi1UIc0PoV/IlUpBVBFAQRRcFSH4gI1SLICGIRROoLqxYRtaBofJvcm9O1DrkhYuTe6YHFee3HXXvvc869dy9+S8AykQgkAaaBgYEHiqJ8I4RIxfx/N82oCRYeAOaamprHJycnzy8vL3dhXIRCoedYp+OXarGGX4Hmo9bW1qzDw8Ofrq+vA1dXVwrm4f7+/jAcbWOfH0AdQ00zfh/SluHh4adHR0edCMfV8fFxyOfzibS0NIE9kZ2dTRIC+19hztAZanRwf3Jy0o5Q/BoOh5Xd3d1gdXW1sFgs0nBiYqLIzMyU46mpqRBY/E4dwBALxvNhRUXFOwhFYHR0VCQlJUljZrNZVFZWis3NTTE9PS3XSkpKSEJdW1tzQM9QLkjVAmSsrKz48XVKRkaGNLa4uEhj0eZ2uwXZ7O3tBS8uLn6BjqFc0MEjwOp0Oj85Pz8/amlpCWMuamtro8Y5GBkZkY7r6+sFkn/S29v7KuR0w6QxeBPCORMTEz9DWbXZbCIlJUUg0VEnyI/IyckRZIhyVbH3HXR0ky1zAME04L309PQvoHjY0dEhWTQ2NkYdcNDW1iZZ9PT0qAjnX9DRTbasIgiSrg34eGhoqBllqmZlZQmr1SqQfJloFIJg4iEjCgoKpGPkw4O5brJJ0ww8Bj5ITk72oNb/7e7uVjEXeXl5Mrkcx2JhYYHJHsCabrI1FikQJovcvr4+v6qqYYfDccNorIOysjIBmdDs7Cx1DLF4CEGyeN9kMn1+cHCwg0tOsog1rI0ZrkAgEDo9PfVhTTfZsSzehoKrq6vLh0CHXS7XnSyampoEkr1fWFjIj9Mt2RsVBYXP9vf3t3C6FYzjOrHb7QLlG8bF+DVkXpqFs729/UeWS35+flwHdDw2NqYg2S8w1i1ZyMhkka48F+jduPzWcBneyaKoqEiWLO4sV0Qf3d2NcWTZJQNvAc7m5mYvLXg8nrgsEhISxNbWVhC56IjoGsoFH543gHcB9/b29uLMzMydLLxeL6+Pi8HBQTLXLdlYFplQeNrQ0PA9WTAcmN9CamoqT7xydnb2A/Z1kw0Z+RUaCzvmBYjxn/Pz8yGMbzngWmdnJ5/UvzE2lGyNBa9ysviorq6uHCTCxcXFcR3k5uaSpEDJfgl53TBBJsridYzJIn99fX1meXk5xIcH81uYm5sLIlQj2DMUplgWVig9qaqq+pYHq7S09IZxPFYCDxCuJlXFe/IPrhhenrrVBJkbLLIwz1tdXf1jY2NDsmDpjo+PKwwN3pHNpaWlKoSKP2e6NyyNs8Wy4KvnKC8vf4YPVVD7Kg3jIC7hAfJi70OAMsybYQeQlSz4p/caYAOegMFvOzs7L/x+P5/NT4HsyB6/njeBzIGhGEGYcqwKOqEy/0IYY5YjcxEELiO4Rs9Sltc8aRhpNMI3mopsHNMQnXKPxrhH8LTL9xy9sSxTMNJokCB99mSmOadRDVyTzWiINHn21NGgrdOgBm1N9v8B04Wtb4LBoPcAAAAASUVORK5CYII=),auto}.dgw-link{cursor:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAcCAYAAACQ0cTtAAAFJUlEQVRIDZ1WW0xjRRg+bSmwFSyCrrALyk3MGlzcRUFuMdk1XCIYE2yIDzzAJsIj+yAksFESyaqAgfgg8iAgD5CQgEJWwgKGW3QtlzfKQjbBclsQCOFO23NOx++fcJqWUkD+5MtM//lnvplv/vlPBcHVVM3Nzb6iKPYymMVi+RzDXoAaUCmhlkXhY6V/Vvto7YHHOHVHR8eVo6Ojvv39fbGpqYnZ7XZ5Y2PjMyzoA3htzAr+1gWNwbosmC1LQqbJJHgrZO8+kRwL/zxb6P9o9UvD7/9WmrufP8isNBl4HO2YTN3Y2Oibk5PzqyzLd2FehYWFQkNDgyowMPCX2dnZDMRop58KGh4tCOy45U1kx5Zeo9Z87+yjvkpgLnHkIyIdTvSYTpSQkEABHCqVirW3t0uQ9Wh8fPwu/FcAr5MyvvdEyksaZ+zWmC0O4w5zk/FYOheilJQUNjg4yPR6PdNqtay3t1eyWq07AwMD72MlItS82b3hn/gn+zTxb7k10ci2iAxYSTDKP97+i2UKlSaHxAq7GtL9BunuwLywewFEQl9fnwAphf7+fkGn0wm5ubmaqakpXWpqag82F43JWtG6oFyBspZrG+jtSCjHAGVdRkYGly00NJTt7e2Ry2HYAD9hQEAAm56eFg8PDxcgexQW8AXoDlWeZHSQKB3c1ZrJZLKFhIRwwvLycgeR0lEIg4ODmdlstuFuZ0pLS0OxBmWphhIEUj5T1vTYtra2xh4cHJgXFxfFqKioUwnHxsaYn58fH4uIiGDr6+vi7u6uMT8//6pC6Jz6HskwoC8qKorb2tp6urm5KcbFxbkQjo6OOogQy8diY2MZyMSdnZ3+8PDwAPgpGVwePn6fai/AezU5Ofkd7HgKdyalpaXxRbFzNyLE8rGkpCSqMNL29nYHfP6AQoiuZ6OgF4GQyMjIt5eXl4eR5lJ2djZfFH6PLSWWJEkyVPkJcX7AuYSUUXTRnNDb2/vG/Px8N56DTCeD/0zk5eVRWbOvra09RCwRagGPz0Jlffj4EwQohMHox8zMzLQgG+0lJSVnkiGWFRcX88RdWlr6Ar/pWk4nZNXDBlYzbJa+/SOr5mY+BZL+rwJvIOXriLCqqupcwoqKCn5CqHIPcxVC14fNyaqH/2HVg5nPsn6g05HuJAeldfTQ0NBXJCkesl2tVp9JWldXZ0eohHdrwFwdQJ+nE4TfjSifBxogvUkGInwFiOzq6rqPRLChVMm4U4+EVLhbWlpkFG7L5ORkOubywo3WlRAOZ1MISY6XgQgscg9ZeoRiLCkPHH43Yo1Gw3p6eiSbzbY3MjKSjBhHWUPfoymEJEcQEF5fX5+HarMzMTEhBgUFuREhhvt8fHwYnpCMzT03GAykzrlPAjH8+KQ7EQYCr5eVlX2E6rE+NzcnUuGGzw01NTX0GmSj0Xgf46QM/yyhPddIbyKkCUT4WkFBwR085MWVlRUxJibGhUwh6uzs/BqxbwGU2bRZes8XMmfClzAjND09PRm1dAakYnx8PCesra3lJ8L/l3rEfADcAP43GeZwSWl3dOFUfK+D5Pbq6uo47lHC3wdnoiyMJwJRAN33hWVErMPohERI71EPXAsLC4tFMgzQHbW1tX0D34dAEkCnugZQGbxQgiDOzZwJaaFgZF80pKO/fLeAm0AMcB0gBRypTxMvYzSPngYlDhUApfLQqen+RMB6DAmtDLDLkmEuv0PllERKRLQBIqPFFRL7sY9PQP/SRmQnQYsRoUJCfW7/Ab1t8CRjuOh+AAAAAElFTkSuQmCC),auto!important;display:inline-block;position:relative;padding:10px;margin:-10px;padding-top:15px;margin-top:-15px}";!function(e){function t(e){return void 0==e?"":(e+"").replace(/[&\"<>]/g,function(e){return o[e]})}function n(e){e=e.type?location.hash:e,e!=a&&s.trigger("pop",e),a=e}e.observable=function(e){var t={},n=[].slice;return e.on=function(n,r){return"function"==typeof r&&n.replace(/[^\s]+/g,function(e,n){(t[e]=t[e]||[]).push(r),r.typed=n>0}),e},e.off=function(n,r){if("*"==n)t={};else if(r)for(var i,o=t[n],a=0;i=o&&o[a];++a)i===r&&o.splice(a,1);else n.replace(/[^\s]+/g,function(e){t[e]=[]});return e},e.one=function(t,n){return n&&(n.one=!0),e.on(t,n)},e.trigger=function(r){for(var i,o=n.call(arguments,1),a=t[r]||[],s=0;i=a[s];++s)i.busy||(i.busy=!0,i.apply(e,i.typed?[r].concat(o):o),i.one&&(a.splice(s,1),s--),i.busy=!1);return e},e};var r={},i={"\\":"\\\\","\n":"\\n","\r":"\\r","'":"\\'"},o={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};if(e.render=function(e,n,o){return o===!0&&(o=t),e=e||"",(r[e]=r[e]||new Function("_","e","return '"+e.replace(/[\\\n\r']/g,function(e){return i[e]}).replace(/{\s*([\w\.]+)\s*}/g,"' + (e?e(_.$1,'$1'):_.$1||(_.$1==undefined?'':_.$1)) + '")+"'"))(n,o)},"object"==typeof top){var a,s=e.observable({}),c=window.addEventListener,u=document;c?(c("popstate",n,!1),u.addEventListener("DOMContentLoaded",n,!1)):u.attachEvent("onreadystatechange",function(){"complete"===u.readyState&&n("")}),e.route=function(e){return"function"==typeof e?s.on("pop",e):(history.pushState&&history.pushState(0,0,e),void n(e))}}}("object"==typeof top?window.riot={}:exports),"document"in self&&!("classList"in document.createElement("_"))&&!function(e){if("Element"in e){var t="classList",n="prototype",r=e.Element[n],i=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},c=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},u=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],r=0,i=n.length;i>r;r++)this.push(n[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},d=u[n]=[],l=function(){return new u(this)};if(s[n]=Error[n],d.item=function(e){return this[e]||null},d.contains=function(e){return e+="",-1!==c(this,e)},d.add=function(){var e,t=arguments,n=0,r=t.length,i=!1;do e=t[n]+"",-1===c(this,e)&&(this.push(e),i=!0);while(++n<r);i&&this._updateClassName()},d.remove=function(){var e,t=arguments,n=0,r=t.length,i=!1;do{e=t[n]+"";var o=c(this,e);-1!==o&&(this.splice(o,1),i=!0)}while(++n<r);i&&this._updateClassName()},d.toggle=function(e,t){e+="";var n=this.contains(e),r=n?t!==!0&&"remove":t!==!1&&"add";return r&&this[r](e),!n},d.toString=function(){return this.join(" ")},i.defineProperty){var f={get:l,enumerable:!0,configurable:!0};try{i.defineProperty(r,t,f)}catch(g){-2146823252===g.number&&(f.enumerable=!1,i.defineProperty(r,t,f))}}else i[n].__defineGetter__&&r.__defineGetter__(t,l)}}(self);var u={link_finders:{Facebook:function(){var e=t("a").filter(function(e){var t=e.getAttribute("data-hovercard");return t&&t.match(/hovercard\/user.php/)?e.children.length?!1:!0:!1}),n=t(".UFICommentActorName");return e.concat(n)}},uniqid_finders:{Facebook:function(e){var t=e.getAttribute("data-hovercard").match(/id=(\d*).*$/)[1],n=e.textContent;return{uniqid:t,name:n}}}},d="https://localhost:3700",l="1",f=s(window.location.host),g=e("#dgw-frame");g&&g.remove(),n('<style id="dgw-styles">'+c+"</style>",e("body"));var h=new r,p=new i;o(e("body")),p.trigger("navigate",d+"/iframe")}();